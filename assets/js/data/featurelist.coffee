#= require ../entity/map

hack.features = features = (->
  featurelist = [
    #small room
    "#####;
    ;#...#;
    ;#...#;
    ;#...#;
    ;#####",

    #medium room
    "#########;
    ;#.......#;
    ;#.......#;
    ;#.......#;
    ;#.......#;
    ;#.......#;
    ;#.......#;
    ;#########",

    #large room
    "################;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;#..............#;
    ;################",

    #horizontal corridor
    "#################;
    ;#...............#;
    ;#################",

    #vartical corridor
    "###;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;#.#;
    ;###",

    #rounded room
    "     #####     ;
    ;   ##.....##   ;
    ; ##.........## ;
    ;##...##.##...##;
    ;#....#...#....#;
    ;##...#####...##;
    ; ##.........## ;
    ;   ##.....##   ;
    ;     #####     ",

    #maze
    "################;
    ;#..............#;
    ;#.##.#########.#;
    ;#.#..#.....#.#.#;
    ;#.#..#.###.#.#.#;
    ;#........#.#.#.#;
    ;#.######.#...#.#;
    ;#..#.....#.#.#.#;
    ;#..#.#####.#.#.#;
    ;#..#...#.......#;
    ;#..###.#######.#;
    ;#..............#;
    ;################",

    #bridge
    "#################;
    ;#...............#;
    ;#.######.######.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.#~~~~#.#~~~~#.#;
    ;#.######.######.#;
    ;#...............#;
    ;#################"
  ]

  matchTable = {
    '#' : hack.Map.WALL
    ' ' : hack.Map.EARTH
    '.' : hack.Map.FLOOR
    '~' : hack.Map.WATER
  }

  mapify = (fstr) ->
    rowstrs = fstr.split(/;;|;\s+;/)
    (matchTable[ch] for ch in row for row in rowstrs)


  (mapify(feature) for feature in  featurelist)
)()
